{% extends 'base.html' %}

{% block conteudo %}
<div style="text-align: right;">
  <br>
  <a href="{{url_for('router.vagas.Cadastrar')}}" class="btn btn-primary" style="width:10rem;height:2.5rem"
    role='buttom' aria-pressed="true"> Cadastrar Vaga</a>
</div>
<!--Alter -->
<h1 class="titulo-reserva">Reservar Vaga</h1>
<div class="legenda-vagas">
  <div class="legenda-item">
    <div class="quadrado legenda-vaga-verde"></div>
    <p class="texto-legenda">Vaga Livre</p>
  </div>
  <div class="legenda-item">
    <div class="quadrado legenda-vaga-amarela"></div>
    <p class="texto-legenda">Vaga Reservada</p>
  </div>
  <div class="legenda-item">
    <div class="quadrado legenda-vaga-vermelha"></div>
    <p class="texto-legenda">Vaga Ocupada</p>
  </div>
  <div class="legenda-item">
    <div class="legenda-acessibilidade"></div>
    <p class="texto-legenda">Vaga de Acessibilidade</p>
  </div>
</div>
<div class="container" id="container-vagas" data-count-vagas="{{CountVagas}}">

</div>

<script>
//pegar o id do usuário logado
//pegar o id da vaga
//Criar a função para buscar o status das vagas
//mandar o status vaga

  function adicionarVaga() {
    let descriVaga = JSON.parse('{{descricaoVagas |safe}}')
    let container = document.getElementById("container-vagas");
    let Vaga = parseInt(container.dataset.countVagas); // ParseInt para garantir que seja tratado como número

    let cont = 1;
    while (cont <= Vaga) {

      console.log(descriVaga[5])

      let vaga = document.createElement("div");
      vaga.className = "espaco-vagas";
      vaga.setAttribute("value", "L");

      vaga.setAttribute("id", cont); // Definindo o ID para cada div de vaga

      if (vaga.getAttribute("value") === "1") {
        vaga.classList.remove("espaco-vagas");
        vaga.classList.add("espaco-vagas-ocupada");
      } else if (vaga.getAttribute("value") === "2") {
        vaga.classList.remove("espaco-vagas");
        vaga.classList.add("espaco-vagas-reservada");
      } else if (vaga.getAttribute("value") === "3") {
        vaga.classList.remove("espaco-vagas");
        vaga.classList.add("espaco-vagas-acessibilidade-livre");
      } else if (vaga.getAttribute("value") === "4") {
        vaga.classList.remove("espaco-vagas");
        vaga.classList.add("espaco-vagas-acessibilidade-ocupada");
      } else if (vaga.getAttribute("value") === "5") {
        vaga.classList.remove("espaco-vagas");
        vaga.classList.add("espaco-vagas-acessibilidade-reservada");
      }

      container.appendChild(vaga);
      cont++;
    }
  }
  adicionarVaga();
</script>

{% endblock conteudo %}